# Документация системы управления проектами

## Ключевые варианты использования

1. **Создание проекта и добавление задач:**

   Пользователь через **Project Service** создаёт новый проект. Затем через **Task Service** добавляет задачи в проект и назначает исполнителей, данные о которых получаются из **User Service**. Это позволяет организовать работу команды и отслеживать прогресс по проекту.

2. **Поиск и обновление задач:**

   Пользователь через **Task Service** ищет конкретные задачи по проекту или по коду, просматривает детали и обновляет статус или назначает нового исполнителя, взаимодействуя с **User Service** для получения актуальной информации о пользователях. Это обеспечивает эффективное управление рабочим процессом.

## Архитектура

Система управления проектами разделена на три основных сервиса в соответствии с принципами DDD:

1. **User Service**:

   - **Ответственность**: Управление пользователями.
   - **База данных**: Хранит информацию о пользователях.
   - **API**:
     - Создание нового пользователя.
     - Поиск пользователя по логину.
     - Поиск пользователя по маске имени и фамилии.

2. **Project Service**:

   - **Ответственность**: Управление проектами.
   - **База данных**: Хранит информацию о проектах.
   - **API**:
     - Создание проекта.
     - Поиск проекта по имени.
     - Получение всех проектов.

3. **Task Service**:

   - **Ответственность**: Управление задачами.
   - **База данных**: Хранит информацию о задачах.
   - **API**:
     - Создание задачи в проекте.
     - Получение всех задач в проекте.
     - Получение задачи по коду.
   - **Межсервисное взаимодействие**: Обращается к **Project Service** и **User Service** для валидации данных.

### Межсервисное взаимодействие

- **Task Service** запрашивает данные у **Project Service** и **User Service** для проверки существования проектов и пользователей.
- Коммуникация осуществляется через REST API. Планируется внедрение брокера сообщений для асинхронной коммуникации.

## Нефункциональные требования

1. **Безопасность**: Единая система аутентификации и авторизации для всех сервисов.
2. **Производительность**: Оптимизация каждого сервиса для быстрого отклика.
3. **Надежность**: Высокая доступность сервисов; отказ одного не должен влиять на работу других.
4. **Масштабируемость**: Возможность масштабирования каждого сервиса независимо в зависимости от нагрузки.

## API

### User Service

- **POST /users** - Создание нового пользователя
  - Тело запроса: `{ "login": "string", "name": "string", "email": "string" }`
  - Ответ: `{ "id": "string", "login": "string", "name": "string", "email": "string" }`

- **GET /users?login={login}** - Поиск пользователя по логину
  - Ответ: `{ "id": "string", "login": "string", "name": "string", "email": "string" }`

- **GET /users?name={name}** - Поиск пользователя по маске имени и фамилии
  - Ответ: `[{ "id": "string", "login": "string", "name": "string", "email": "string" }, ...]`

### Project Service

- **POST /projects** - Создание проекта
  - Тело запроса: `{ "name": "string", "description": "string" }`
  - Ответ: `{ "id": "string", "name": "string", "description": "string" }`

- **GET /projects?name={name}** - Поиск проекта по имени
  - Ответ: `[{ "id": "string", "name": "string", "description": "string" }, ...]`

- **GET /projects** - Получение всех проектов
  - Ответ: `[{ "id": "string", "name": "string", "description": "string" }, ...]`

### Task Service

- **POST /tasks** - Создание задачи
  - Тело запроса: `{ "title": "string", "description": "string", "projectId": "string", "assigneeId": "string" }`
  - **Замечание**: Перед созданием задачи сервис проверяет существование `projectId` и `assigneeId` через соответствующие сервисы.
  - Ответ: `{ "id": "string", "title": "string", "description": "string", "projectId": "string", "assigneeId": "string" }`

- **GET /tasks?projectId={projectId}** - Получение всех задач в проекте
  - Ответ: `[{ "id": "string", "title": "string", "description": "string", "projectId": "string", "assigneeId": "string" }, ...]`

- **GET /tasks/{taskId}** - Получение задачи по коду
  - Ответ: `{ "id": "string", "title": "string", "description": "string", "projectId": "string", "assigneeId": "string" }`

## Технологии

- **Язык и фреймворк**: Java, Spring Boot
- **Базы данных**: PostgreSQL (отдельная база для каждого сервиса)
- **ORM**: Hibernate (JPA)
- **Коммуникация**:
  - RESTful API over HTTPS для взаимодействия с клиентами
  - REST API между сервисами
- **Аутентификация и авторизация**: OAuth 2.0 (централизованный сервис или распределённая настройка)
- **Контейнеризация и оркестрация**: Docker и Kubernetes
- **Межсервисная коммуникация**: Возможность использования брокера сообщений для повышения надёжности и асинхронности

## Дальнейшее развитие

1. **Улучшение межсервисной коммуникации**: Внедрение брокера сообщений для асинхронного взаимодействия и повышения отказоустойчивости.

2. **Централизованный сервис аутентификации**: Разработка отдельного Auth Service для управления аутентификацией и авторизацией.

3. **Мониторинг и логирование**: Внедрение инструментов для централизованного мониторинга и логирования работы сервисов.

4. **Интеграция с внешними системами**: Реализация интеграции с инструментами CI/CD, системами контроля версий и другими внешними сервисами.

